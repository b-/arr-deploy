[[stack]]
name = "mediaboxlite-arr"
tags = [
  "mediaboxlite",
  "mediaboxlite-arr",
  "arr"
]
[stack.config]
server = "mediaboxlite"
links = [
  "https://filebrowser.mediaboxlite.ibeep.com",
  "https://plex.mediaboxlite.ibeep.com",
  "https://jellyfin.mediaboxlite.ibeep.com",
  "https://tautulli.mediaboxlite.ibeep.com",
  "https://radarr.mediaboxlite.ibeep.com",
  "https://prowlarr.mediaboxlite.ibeep.com",
  "https://sonarr.mediaboxlite.ibeep.com",
  "https://qbittorrent.mediaboxlite.ibeep.com"
]
poll_for_updates = true
auto_update = true
git_account = "b-"
repo = "b-/arr-deploy"
reclone = true
file_paths = [
  "compose.yaml",
  "compose.override.yaml"
]
env_file_path = "compose.env"
environment = """
TRAEFIK_DOCKER_NETWORK=traefik
TZ=America/New_York
SONARR_API_KEY=[[OP__KOMODO__SONARR_API_KEY__CREDENTIAL]]
TRAEFIK_RULE_PREFIX=[[OP__KOMODO__TRAEFIK__RULE_PREFIX]]
TRAEFIK_RULE_SUFFIX=[[OP__KOMODO__TRAEFIK__RULE_SUFFIX]]
TS_AUTHKEY=[[OP__KOMODO__TAILSCALE_OP__CLIENT_SECRET]]?ephemeral=true
"""

##

[[resource_sync]]
name = "mediaboxlite-arr"
tags = [
  "mediaboxlite",
  "mediaboxlite-arr",
  "arr",
  "sync"
]
[resource_sync.config]
repo = "b-/arr-deploy"
git_account = "b-"
resource_path = ["stack.toml"]
managed = true
match_tags = ["mediaboxlite-arr"]
